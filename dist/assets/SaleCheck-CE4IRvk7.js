import{j as t}from"./framer-O_qyKole.js";import{M as R}from"./Mount-Dc8eYI6H.js";import{r as F,t as m,F as v,I as i}from"./index-spHznbun.js";import{r as E}from"./react-Bjzu39jn.js";import{z as s}from"./validation-DXqQCM1T.js";import{u as n}from"./seller.store-ByCxeVRh.js";import{J as u,E as N,B as d}from"./ui--o9aqPNp.js";import{a as y}from"./utils-m6CwOAsu.js";import{S as A}from"./SellerLayout-Cvg2z9rf.js";import"./tanstack-cynJ2YVG.js";import"./trpc-DBeWMeKD.js";import"./zustand-MWJfmZmr.js";import"./reactHookForm-6EQnDOt0.js";import"./recharts-Decb_PJ4.js";var p=(r=>(r.CASH="CASH",r.TR="TR",r))(p||{});const z=s.object({client:s.string().trim().min(1,{message:"Nombre del cliente requerido"}).max(250),payment:s.nativeEnum(p).optional(),address:s.string().trim().max(250).optional(),contact:s.string().max(15).optional(),discount:s.coerce.number().optional()});function D(){const r=y(),{errors:o,handleSubmit:f,register:a,watch:S}=F(z),x=n(e=>e.setDiscount),l=S("discount")||0,g=n(e=>e.clearSales),h=m.useUtils(),{mutate:b}=m.shop.seller.sales.useMutation({onSuccess(e){u.success(`Venta registrada satisfactoriamente #: ${new Date().getFullYear()}-${e}`,{duration:2e3})},onSettled(){g(),h.shop.seller.stock.invalidate(),r("/seller")}});E.useEffect(()=>{x(l)},[l]);const c=n(e=>e.cup),j=n(e=>e.sales),C=e=>{if(c<1)return u.warning("Debe entrar un valor real del dollar",{position:"top-center",duration:4e3});b({salesNote:e,cup:c,sales:j})};return t.jsxs(v,{handleResolver:C,handleSubmit:f,titleButton:"Cerrar venta",colorButton:"success",classNames:{btnSubmit:"text-white text-[1.1rem] font-semibold"},children:[t.jsxs(N,{color:o.payment?"danger":"primary",defaultSelectedKeys:["CASH"],size:"sm",...a("payment"),"aria-label":"Select payment","aria-hidden":"false",label:"Seleccione el modo de pago",children:[t.jsx(d,{children:"EFECTIVO"},"CASH"),t.jsx(d,{children:"TRANSFERENCIA"},"TR")]}),t.jsx(i,{handleFormRegister:a("client"),title:"Cliente",field:o.client,size:"lg",isRequired:!0}),t.jsx(i,{handleFormRegister:a("address"),title:"Dirección",field:o.address,size:"lg"}),t.jsx(i,{handleFormRegister:a("contact"),title:"Número de teléfono",field:o.contact,size:"lg"})]})}function O(){return t.jsxs(A,{content:"Nota de venta",className:"space-y-3",children:[t.jsx(R,{notAction:!0}),t.jsx(D,{})]})}export{O as default};
