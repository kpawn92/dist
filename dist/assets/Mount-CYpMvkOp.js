import{j as e}from"./framer-O_qyKole.js";import{a as j,s as x}from"./utils-m6CwOAsu.js";import{t as m,ae as f,aa as S,af as g,ag as b,ah as v}from"./index-5Z8Lvhuy.js";import{r as p}from"./react-Bjzu39jn.js";import{u as o}from"./seller.store-BjNwDVqt.js";import{J as h}from"./ui--o9aqPNp.js";const y=()=>{const[a,t]=p.useState(0),n=o(s=>s.sales),c=o(s=>s.cup),l=o(s=>s.pay),i=o(s=>s.discount),r=p.useMemo(()=>{t(0);const s=n.reduce((u,d)=>u+d.cost*d.qt,0);if(i>0){const u=s*(i/100);return s-u}return l>0?(t(s*c/l),l/c):s},[n,l,i]);return{sales:n,mount:r,cup:c,percent:a}};function C(){const a=o(r=>r.sales),t=o(r=>r.cup),n=o(r=>r.clearSales),c=m.useUtils(),{mutate:l}=m.shop.seller.sales.useMutation({onSuccess(r){n(),h.success(`Venta ${f(r)} registrado satisfactoriamente`,{duration:3e3})},onSettled(){c.shop.seller.stock.invalidate()}}),i=()=>{if(t<1)return h.warning("Debe entrar un valor real del dollar",{position:"top-center",duration:4e3});l({sales:a,cup:t,salesNote:{}})};return e.jsx("button",{className:"text-4xl",onClick:i,children:e.jsx(S,{})})}function M(){const a=o(t=>t.clearSales);return e.jsx("button",{className:"text-4xl",onClick:a,children:e.jsx(g,{})})}function N(){const[a,t]=o(n=>[n.setShowProducts,n.showProducts]);return e.jsx("button",{onClick:()=>a(!t),className:"text-4xl",children:e.jsx(b,{})})}function E({notAction:a}){const{mount:t,percent:n,cup:c}=y(),l=o(r=>r.sales),i=j();return e.jsxs("div",{className:"font-semibold bg-green-500 text-white border px-4 py-2 rounded-lg flex items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{children:"Monto total"}),e.jsx(x,{value:t,format:{style:"currency",maximumFractionDigits:2,currency:"USD"},locales:"en-US",className:"text-3xl"})]}),n>0&&e.jsxs("div",{children:[e.jsx("p",{children:"Margen descuento"}),e.jsx("p",{className:"text-[1.8rem]",children:n.toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2})+"%"})]}),c>0&&e.jsxs("div",{children:[e.jsx("p",{children:"Moneda nacional"}),e.jsx(x,{value:t*c,format:{style:"currency",maximumFractionDigits:2,currency:"CUP"},locales:"en-US",className:"text-3xl"})]}),!a&&l.length>0&&e.jsxs("div",{className:`flex gap-5 items-center \r
        [&>button]:border\r
        [&>button]:p-4        \r
        [&>button]:bg-green-200                \r
        [&>button]:text-green-700        \r
        [&>button]:rounded-md        \r
        `,children:[e.jsx(N,{}),e.jsx("button",{className:"text-4xl",onClick:()=>i("/seller/check"),children:e.jsx(v,{})}),e.jsx(C,{}),e.jsx(M,{})]})]})}export{E as M};
