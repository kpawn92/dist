import{j as t}from"./framer-O_qyKole.js";import{a4 as g,a5 as f,r as C,t as j,a6 as O,F as v,Z as x,I as F}from"./index-BqOnyvY0.js";import{J as a,G as D,i as E}from"./ui--o9aqPNp.js";import{z as o}from"./validation-DXqQCM1T.js";import{a as z}from"./utils-m6CwOAsu.js";import"./react-Bjzu39jn.js";import"./tanstack-cynJ2YVG.js";import"./trpc-DBeWMeKD.js";import"./zustand-MWJfmZmr.js";import"./reactHookForm-6EQnDOt0.js";import"./recharts-Decb_PJ4.js";const J=o.object({description:o.string().trim().min(1,{message:"El campo es requerido"}),currency:o.string().trim().min(1,{message:"La moneda es requerida"}),cost:o.coerce.number()}),G=()=>{const i=g(r=>r.pictureBase64),u=g(r=>r.reset),e=f(r=>r.offer),h=f(r=>r.setOffer),{errors:s,handleSubmit:y,register:n,reset:d}=C(J),{mutate:b,isPending:p}=j.offershop.jorgeOffer.create.useMutation({onSuccess(){d(),a.success("Oferta registrada correctamente"),u()}}),P=z(),{mutate:S,isPending:m}=j.offershop.jorgeOffer.update.useMutation({onSuccess(){d(),u(),h(void 0),P("/jorge-dash"),a.success("Oferta actualizada correctamente")},onError(r){console.log(r.message)}}),U=({description:r,currency:c,cost:l})=>{if(!["USD","CUP"].includes(c.toUpperCase()))return a.error("Entre una moneda valida");if(e&&S({id:e.id,cost:l,currency:c.toUpperCase(),product:{description:r,picture:i}}),!i)return a.error("La imagen es requerida");b({product:{description:r,picture:i},cost:l,currency:c.toUpperCase()})};return t.jsxs("section",{className:"p-5 mt-10 flex flex-col gap-2",children:[t.jsx(O,{label:"Presione en el área para subir la imagen",img:e==null?void 0:e.product.picture}),t.jsxs(v,{isLoading:m||p,isDisabled:m||p,handleResolver:U,handleSubmit:y,titleButton:e?"Actualizar oferta":"Agregar oferta",colorButton:e?"secondary":"primary",children:[t.jsx(D,{defaultValue:e==null?void 0:e.product.description,label:"Descripción",rows:2,size:"sm",...n("description"),color:s.description?"danger":"primary"}),t.jsx(x,{field:s.description}),t.jsx(E,{defaultValue:e==null?void 0:e.cost.toString(),...n("cost"),label:"Precio de venta",step:"0.01",type:"number",color:s.cost?"danger":"primary"}),t.jsx(x,{field:s.cost}),t.jsx(F,{defaultValue:e==null?void 0:e.currency.toUpperCase(),handleFormRegister:n("currency"),title:"Moneda",field:s.currency,list:"currency"}),t.jsxs("datalist",{id:"currency",children:[t.jsx("option",{children:"CUP"}),t.jsx("option",{children:"USD"})]})]})]})};export{G as default};
