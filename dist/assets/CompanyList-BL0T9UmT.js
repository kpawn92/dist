import{j as e}from"./framer-O_qyKole.js";import{T as b}from"./TableContainer-BcSKW1__.js";import{C as h,u as y}from"./CompanyAction-DD9E43QL.js";import{r as i}from"./react-Bjzu39jn.js";import{au as N,av as v,r as w,t as m,F as P,I as d,aw as A,ax as E,R as F}from"./index-CzuXR2Po.js";import{w as p,x as u,e as c,y as x,J as C}from"./ui--o9aqPNp.js";import{z as l}from"./validation-DXqQCM1T.js";import"./utils-m6CwOAsu.js";import"./recharts-Decb_PJ4.js";import"./tanstack-cynJ2YVG.js";import"./trpc-DBeWMeKD.js";import"./zustand-MWJfmZmr.js";import"./reactHookForm-6EQnDOt0.js";const I=[{key:"company",label:"COMPANY"},{key:"expire",label:"FECHA LIMITE"},{key:"client",label:"CLIENTE"},{key:"actions",label:"ACCIONES"}],O=({id:r})=>{const{rehiring:s}=N(),[a,o]=i.useState(!1);return e.jsx("div",{children:e.jsxs(p,{isOpen:a,onOpenChange:t=>o(t),className:"min-w-[222px]",children:[e.jsx(u,{children:e.jsx(c,{type:"button",color:"secondary",startContent:e.jsx(v,{className:"text-2xl"}),onPress:()=>o(!0)})}),e.jsx(x,{children:e.jsx(h,{setAction:t=>s({id:r,dateExpire:t?new Date(t):new Date})})})]})})},S=l.object({fullName:l.string().trim().min(1),email:l.string().email()}),k=({id:r})=>{const{errors:s,handleSubmit:a,register:o,reset:t}=w(S),{mutate:n,isPending:j}=m.subscription.addcolab.useMutation({onSuccess(){C.success("Colaborador creado ok!!!"),t()}}),g=f=>{n({companyId:r,...f})};return e.jsxs(P,{handleResolver:g,handleSubmit:a,titleButton:"Agregar colaborador",isLoading:j,colorButton:"warning",children:[e.jsx(d,{handleFormRegister:o("fullName"),title:"Nombre completo",field:s.fullName,size:"sm"}),e.jsx(d,{handleFormRegister:o("email"),title:"Correo electronico",field:s.email,size:"sm"})]})},L=({id:r})=>{const[s,a]=i.useState(!1);return e.jsx("div",{children:e.jsxs(p,{isOpen:s,onOpenChange:o=>a(o),className:"min-w-[222px]",children:[e.jsx(u,{children:e.jsx(c,{type:"button",color:"warning",startContent:e.jsx(A,{className:"text-2xl"}),onPress:()=>a(!0)})}),e.jsx(x,{children:e.jsx(k,{id:r})})]})})},M=({id:r})=>{const{mutate:s,isPending:a}=m.subscription.colabplus.useMutation({onSuccess(){C.success("Vendedor agregado")}}),o=()=>{s(r)};return e.jsx(c,{color:"success",isLoading:a,isDisabled:a,startContent:e.jsx(E,{className:"text-2xl"}),onClick:o})},R=()=>i.useCallback((s,a)=>{const o=s[a],t=s.subscribers.at(0);switch(a){case"company":return e.jsx("div",{className:"font-semibold uppercase",children:s.description});case"expire":return e.jsx("div",{className:"uppercase text-red-500 font-semibold",children:F(s.dateExpire)});case"client":return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h4",{className:"uppercase font-semibold text-neutral-800",children:t==null?void 0:t.fullName}),e.jsx("p",{className:"text-neutral-600",children:t==null?void 0:t.email})]});case"actions":return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(O,{id:s.id}),e.jsx(L,{id:s.id}),e.jsx(M,{id:s.id})]});default:return o}},[]),Q=()=>{const{companies:r,currentPage:s,isLoading:a,totalPages:o,setCurrentPage:t}=y(),n=R();return e.jsx(b,{arialLabel:"List subscribers",columns:I,page:s,renderCell:n,setPage:t,isLoading:a,rows:r,total:o})};export{Q as default};
