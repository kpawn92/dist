import{j as s}from"./framer-O_qyKole.js";import{r as w,u as l,t as v,F as N,Z as m,_ as y,$ as E}from"./index-CwMAiuer.js";import{r as c}from"./react-Bjzu39jn.js";import{J as d,i as u}from"./ui--o9aqPNp.js";import{z as t}from"./validation-DXqQCM1T.js";import{a as S}from"./utils-m6CwOAsu.js";import"./tanstack-cynJ2YVG.js";import"./trpc-DBeWMeKD.js";import"./zustand-MWJfmZmr.js";import"./reactHookForm-6EQnDOt0.js";import"./recharts-Decb_PJ4.js";const A=t.object({username:t.string().trim().min(1),password:t.string().trim().min(1)}),M=()=>{const[r,x]=c.useState(!1),{errors:o,handleSubmit:p,register:a}=w(A),h=l(e=>e.setToken),i=l(e=>e.accessToken),f=S();c.useEffect(()=>{i&&f("/jorge-dash")},[i]);const{mutate:j,isPending:n}=v.auth.local.useMutation({onSuccess({access_token:e,subscriber:g}){if(g.role!=="OPERATOR")return d.error("Usuario no autorizado");h(e),E(e),d.success("Acceso aceptado")}}),b=e=>{j(e)};return s.jsx("div",{className:"relative min-h-screen bg-neutral-100 flex items-center justify-center p-4 overflow-hidden",children:s.jsx("div",{className:"max-w-2xl z-0",children:s.jsx("div",{className:"bg-neutral-50 w-full rounded-md p-8 mb-8 shadow-2xl shadow-neutral-400 flex",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex flex-col items-center gap-1 mb-8",children:[s.jsx("h1",{className:"text-xl font-semibold",children:"Administración"}),s.jsx("p",{className:"text-sm",children:"TALLER JORGE"})]}),s.jsxs(N,{isLoading:n,isDisabled:n,handleResolver:b,handleSubmit:p,titleButton:"Acceder",colorButton:"primary",classNames:{btnSubmit:"font-semibold"},children:[s.jsx(u,{label:"Usuario",color:"primary",radius:"sm",size:"lg",...a("username")}),s.jsx(m,{field:o.username}),s.jsx(u,{label:"Contraseña",size:"lg",radius:"sm",color:"primary",type:r?"text":"password",...a("password"),endContent:s.jsx("button",{type:"button",onClick:()=>x(!r),children:s.jsx(y,{className:"text-2xl text-blue-500"})})}),s.jsx(m,{field:o.password})]})]})})})})};export{M as default};
