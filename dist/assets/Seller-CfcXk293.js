import{j as e,i as N}from"./framer-O_qyKole.js";import{a7 as w,a8 as C,N as v,n as h,u as S,e as y,t as b,a9 as k,aa as q,ab as P,U as L}from"./index-CzuXR2Po.js";import{r as j}from"./react-Bjzu39jn.js";import{u as d}from"./seller.store-UkafsgJ1.js";import{L as z,f as M,D as A,i as D}from"./ui--o9aqPNp.js";import{a as f,L as U}from"./utils-m6CwOAsu.js";import{M as R}from"./Mount-Dp9Efnch.js";import"./tanstack-cynJ2YVG.js";import"./trpc-DBeWMeKD.js";import"./zustand-MWJfmZmr.js";import"./reactHookForm-6EQnDOt0.js";import"./validation-DXqQCM1T.js";import"./recharts-Decb_PJ4.js";function _({id:r,qt:o}){const a=d(c=>c.sales),l=d(c=>c.addQt),s=d(c=>c.reduceQt),t=j.useMemo(()=>a.find(c=>c.id===r),[a]),n=o>((t==null?void 0:t.qt)||0),u=()=>{l(r)},m=()=>{s(r)};return e.jsxs(e.Fragment,{children:[n&&e.jsx("button",{className:"text-2xl absolute right-1",onClick:u,children:e.jsx(w,{})}),((t==null?void 0:t.qt)||0)>1&&e.jsx("div",{className:"absolute top-32 right-0 left-0 bottom-0 bg-neutral-200 opacity-80 rounded-lg z-20 flex items-center justify-center",children:e.jsx("p",{className:"text-[4rem] font-bold text-neutral-500",children:t==null?void 0:t.qt})}),((t==null?void 0:t.qt)||0)>1&&e.jsx("button",{className:"text-2xl absolute right-1 bottom-1 z-30 bg-white rounded-xl",onClick:m,children:e.jsx(C,{})})]})}function F({picture:r,description:o,cost:a,id:l,qt:s}){const{data:t}=v(r),n=d(i=>i.setSale),u=d(i=>i.sales),m=d(i=>i.cup),[c,x]=j.useMemo(()=>{const i=u.some(p=>p.id===l),g=u.find(p=>p.id===l);return[i,g]},[u]);return e.jsxs("div",{className:"relative",children:[e.jsx(_,{id:l,qt:s}),e.jsx(z,{size:"lg",defaultSelected:c,className:"absolute top-0 z-20",color:"primary",onValueChange:()=>{n({id:l,cost:a,description:o,qt:1})}},String(c)+Math.random().toString()),c&&e.jsxs("div",{className:"pt-6",children:[e.jsx("p",{className:"w-40",children:o}),e.jsx("p",{className:"font-semibold text-[1.2rem]",children:h(a*((x==null?void 0:x.qt)||1))}),m>0&&e.jsx("p",{className:"text-[1.2rem]",children:h(m*(a*((x==null?void 0:x.qt)||1)),"CUP")})]}),e.jsx(M,{width:200,isZoomed:!0,src:t||"",className:"w-40 h-40 object-cover aspect-square"})]})}function O(){const r=S(l=>l.reset),o=f(),a=()=>{r(),o("/")};return e.jsx("button",{className:"fixed text-4xl top-5 right-5 z-50",onClick:a,children:e.jsx(y,{})})}function Q(){const r=b.useUtils(),o=()=>{r.shop.seller.stock.invalidate()};return e.jsxs("header",{className:"font-semibold text-[2rem] flex gap-1 items-center",children:["Stock",e.jsx("button",{onClick:o,children:e.jsx(k,{})}),e.jsx(U,{to:"/seller/operations",children:e.jsx(q,{})})]})}function E(){const[r,o]=d(s=>[s.setShowProducts,s.showProducts]),a=d(s=>s.sales),l=d(s=>s.cup)||0;return e.jsx("div",{children:e.jsxs(N.div,{drag:!0,dragConstraints:{top:0,left:0,right:window.innerWidth,bottom:window.innerHeight},className:"fixed bg-white p-4 rounded-xl shadow-lg w-full max-w-3xl z-50",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Lista de Productos"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200 text-gray-700",children:[e.jsx("th",{className:"p-2 border",children:"Descripción"}),e.jsx("th",{className:"p-2 border",children:"Cantidad"}),e.jsx("th",{className:"p-2 border",children:"Costo"}),e.jsx("th",{className:"p-2 border",children:"Precio CUP"})]})}),e.jsx("tbody",{children:a.map(s=>e.jsxs("tr",{className:"odd:bg-gray-100 even:bg-gray-50",children:[e.jsx("td",{className:"p-2 border",children:s.description}),e.jsx("td",{className:"p-2 border text-center",children:s.qt}),e.jsx("td",{className:"p-2 border text-center",children:h(s.cost*s.qt)}),e.jsx("td",{className:"p-2 border text-center",children:h(s.cost*s.qt*l,"cup")})]},s.id))})]})}),e.jsx("button",{onClick:()=>r(!o),className:"mt-4 w-full bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded-lg",children:"Cerrar"})]})})}function ee(){const{data:r,isLoading:o}=b.shop.seller.stock.useQuery(),[a,l]=j.useState(""),s=f(),t=d(n=>n.showProducts);return e.jsxs("section",{className:"p-5 w-screen min-h-screen bg-neutral-100 antialiased",children:[t&&e.jsx(E,{}),e.jsx(O,{}),e.jsx("button",{className:"fixed top-14 right-5 text-4xl z-50",onClick:()=>s("/seller/tools"),children:e.jsx(P,{})}),e.jsxs("div",{className:"fixed top-0 right-0 left-0 p-5 bg-neutral-100 z-40",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx(Q,{}),e.jsx("p",{className:"text-[1.3rem]",children:"Listado de productos disponibles en tienda"}),e.jsx(A,{}),e.jsx(D,{onValueChange:l,placeholder:"Filtrar por descripción...",size:"lg",className:"py-2 my-2",color:"primary",radius:"none"})]}),e.jsx(R,{})]}),o&&e.jsx(L,{}),e.jsx("div",{className:"flex flex-wrap items-start gap-4 mt-64",children:r==null?void 0:r.filter(n=>n.description.toLowerCase().includes(a.toLowerCase())).map(n=>e.jsxs("div",{className:"relative border p-4 rounded-sm bg-white",children:[e.jsx(F,{...n}),e.jsx("p",{className:"absolute bottom-0 left-0 px-2 rounded-xl pb-1 bg-white z-30 text-[2rem] font-bold",children:n.qt})]},n.id))})]})}export{ee as default};
